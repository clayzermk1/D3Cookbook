<!DOCTYPE HTML>
<html lang="en_US">

  <head>
    <title>D3Cookbook Demo Gallery</title>
    <!-- Styles -->
    <link rel="stylesheet" href="lib/bootstrap/css/bootstrap.min.css" type="text/css"
    />
    <link rel="stylesheet" href="lib/font-awesome/css/font-awesome.css" type="text/css"
    />
    <style>
      .nav-list > li > a:first-letter {
        text-transform:capitalize;
      }
    </style>
  </head>

  <body>
    <!-- jQuery 1.8.2 breaks support for svg events -->
    <script type="text/javascript" src="lib/jquery/jquery-1.8.1.min.js"></script>
    <script type="text/javascript" src="lib/lodash/lodash.min.js"></script>
    <script type="text/javascript" src="lib/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="lib/d3/d3.v3.js"></script>
    <script type="text/javascript" src="../dist/D3Cookbook.js"></script>
    <script type="text/javascript">
      $(document).on('ready', function(e) {
        // Build out the nav list.
        var bookmarks = ["overview"].concat(_.map($('#overview div.row-fluid'), function(d, i) { return $(d).attr("id"); }));
        d3.select(".nav-list").selectAll("li:not(.nav-header)")
          .data(bookmarks)
          .enter()
          .append("li")
            .append("a")
              .attr("href", function(d) {
                return "#" + d; })
              .text(function(d) {
                return d; });

        // Fire up the affix bootstrap plugin on the navbar.
        $('.nav-list').affix({
          offset: {
            top: function () { return $(window).width() <= 980 ? 290 : 210 },
            bottom: 270
          }
        });


      });
    </script>

    <div class="container-fluid">
      <div class="row-fluid">
        <div id="nav" class="span3">
          <ul class="nav nav-list well span3">
            <li class="nav-header">Visualizations</li>
          </ul>
        </div>
        <!--/nav-->
        <div id="overview" class="span9">
          <div class="hero-unit">
            <h1>D3 Cookbook</h1>
            <p>A collection of modular, reusable d3 recipes.</p>
            <p>D3 is an amazing tool, but it has a bit of a learning curve and it doesn't lend itself to reuse.
            Each visualization is best created from scratch and attempts to abstract concepts from D3 just add bloat and reduce the performance found in D3.
            So the question is: "How do you make D3 reusable without decreasing performance?"
            The solution we chose is just to make a "cookbook" full of recipes for common (or not so common) visualizations and make them as modular as possible.</p>
          </div>

          <!-- pie -->
          <div id="pie" class="row-fluid">
            <h2>Pie</h2>
            <p>Pie charts are a great way to look at parts of a whole (percents or fractions).</p>
            <div class="vis"></div>
            <button type="button" class="btn update">Update visualization with random data</button>
            <button type="button" class="btn append">Append random data to the visualization</button>
            <h4>Data:</h4>
            <pre>[
  {"age": "&lt;5",    "population": 2704659},
  {"age": "5-13",  "population": 4499890},
  {"age": "14-17", "population": 2159981},
  {"age": "18-24", "population": 3853788},
  {"age": "25-44", "population": 14106543},
  {"age": "45-64", "population": 8819342},
  {"age": "&gt;=65",  "population": 612463}
]</pre>
            <script type="text/javascript">
              var pie = null;
              $(document).on('ready', function() {
                pie = new Recipe['pie']({
                  "data": JSON.parse($('#donut pre').text()),
                  "selector": "#pie .vis",
                  "labelKey": "age",
                  "valueKey": "population"
                });
              })
              .on('click', '#pie button.btn.update', function(e) {
                _.each(pie.options.data, function(d) {
                  d.population = Math.random() * 10000000;
                });
                pie.update();
              })
              .on('click', '#pie button.btn.append', function(e) {
                pie.update({
                  "data": pie.options.data.concat([
                    {"age": ">100", "population": 70490}
                  ])
                });
              });
            </script>
          </div>
          <!--/pie-->

          <!-- donut -->
          <div id="donut" class="row-fluid">
            <h2>Donut</h2>
            <p>Donut charts are pie charts with a hole in the middle. Like pie charts, donut charts are a great way to look at parts of a whole (percents or fractions).</p>
            <div class="vis"></div>
            <button type="button" class="btn update">Update visualization with random data</button>
            <button type="button" class="btn append">Append random data to the visualization</button>
            <h4>Data:</h4>
            <pre>[
  {"age": "&lt;5", "population": 2704659},
  {"age": "5-13", "population": 4499890},
  {"age": "14-17", "population": 2159981},
  {"age": "18-24", "population": 3853788},
  {"age": "25-44", "population": 14106543},
  {"age": "45-64", "population": 8819342},
  {"age": "&gt;=65", "population": 612463}
]</pre>
            <script type="text/javascript">
              var donut = null;
              $(document).on('ready', function() {
                donut = new Recipe['pie']({
                  "data": JSON.parse($('#donut pre').text()),
                  "selector": "#donut .vis",
                  "labelKey": "age",
                  "valueKey": "population",
                  "rh": 150 // Just make the radius of the hole ("rh" = "radius of hole") something > 0 to make a pie chart a donut chart.
                });
              })
              .on('click', '#donut button.btn.update', function(e) {
                _.each(donut.options.data, function(d) {
                  d.population = Math.random() * 10000000;
                });
                donut.update();
              })
              .on('click', '#donut button.btn.append', function(e) {
                donut.update({
                  "data": donut.options.data.concat([
                    {"age": ">100", "population": 70490}
                  ])
                });
              });
            </script>
          </div>
          <!--/donut-->

          <!-- cartesian -->
          <div id="cartesian" class="row-fluid">
            <h2>Cartesian</h2>
            <p>Cartesian graphs are ideal for displaying two-dimensional continuous data.</p>
            <p>Line, Area, and Scatter are all subclasses of Cartesian. Cartesian itself is never called directly.</p>
          </div>
          <!--/cartesian-->

          <!-- line -->
          <div id="line" class="row-fluid">
            <h2>Line</h2>
            <p>Line graphs display a set of interpolated points as a line.</p>
            <div class="vis"></div>
            <button type="button" class="btn update">Update visualization with random data</button>
            <button type="button" class="btn append">Append random data to the visualization</button>
            <h4>Data Sample:</h4>
            <span>Full data set can be found in <a href="./data/browsers.json">browsers.json</a>.</span>
            <pre>[
  {"date": "11-Oct-13", "percent": "41.62", "browser": "IE"},
  ...
  {"date": "11-Oct-13", "percent": "22.36", "browser": "Chrome"},
  ...
  {"date": "11-Oct-13", "percent": "25.58", "browser": "Firefox"},
  ...
  {"date": "11-Oct-13", "percent": "9.13", "browser": "Safari"},
  ...
  {"date": "11-Oct-13", "percent": "1.22", "browser": "Opera"},
  ...
]</pre>
            <script type="text/javascript">
              var line = null;
              $(document).on('ready', function() {
                d3.json('./data/browsers.json', function(err, json) {
                  line = new Recipe['line']({
                    "data": json,
                    "selector": "#line .vis",
                    "xKey": "date",
                    "yKey": "percent",
                    "seriesKey": "browser",
                    "xFormatter": d3.time.format("%y-%b-%d").parse,
                    "yFormatter": function(d) { return +d; },
                    "xScale": d3.time.scale,
                    "xAxisLabel": "Date",
                    "yAxisLabel": "Percent (%)",
                    "xAxisFormatter": d3.time.format("%x")
                  });
                });
              })
              .on('click', '#line button.btn.update', function(e) {
                var browsers = _.chain(line.options.data).pluck("browser").uniq().value();
                _.each(line.options.data, function(d, i) {
                  d.percent = (Math.random() * 10) + ((browsers.indexOf(d.browser)+1) * 10);
                });
                line.update();
              })
              .on('click', '#line button.btn.append', function(e) {
                line.update({
                  "data": line.options.data.concat([
                    {"date": "11-Oct-13", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-14", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-15", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-16", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-17", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-18", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-19", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-20", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-21", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-22", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-23", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-24", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-25", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-26", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-27", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-28", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-29", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-30", "percent": Math.random() * 100, "browser": "Maxthon"}
                  ])
                });
              });
            </script>
          </div>
          <!--/line-->

          <!-- area -->
          <div id="area" class="row-fluid">
            <h2>Area</h2>
            <p>Area graphs display a set of interpolated points as a line, the region beneith which is opaque.</p>
            <div class="vis"></div>
            <button type="button" class="btn update">Update visualization with random data</button>
            <button type="button" class="btn append">Append random data to the visualization</button>
            <h4>Data Sample:</h4>
            <span>Full data set can be found in <a href="./data/browsers.json">browsers.json</a>.</span>
            <pre>[
  {"date": "11-Oct-13", "percent": "41.62", "browser": "IE"},
  ...
  {"date": "11-Oct-13", "percent": "22.36", "browser": "Chrome"},
  ...
  {"date": "11-Oct-13", "percent": "25.58", "browser": "Firefox"},
  ...
  {"date": "11-Oct-13", "percent": "9.13", "browser": "Safari"},
  ...
  {"date": "11-Oct-13", "percent": "1.22", "browser": "Opera"},
  ...
]</pre>
            <script type="text/javascript">
              var area = null;
              $(document).on('ready', function() {
                d3.json('./data/browsers.json', function(err, json) {
                  area = new Recipe['area']({
                    "data": json,
                    "selector": "#area .vis",
                    "xKey": "date",
                    "yKey": "percent",
                    "seriesKey": "browser",
                    "xFormatter": d3.time.format("%y-%b-%d").parse,
                    "yFormatter": function(d) { return +d; },
                    "xScale": d3.time.scale,
                    "xAxisLabel": "Date",
                    "yAxisLabel": "Percent (%)",
                    "xAxisFormatter": d3.time.format("%x")
                  });
                });
              })
              .on('click', '#area button.btn.update', function(e) {
                var browsers = _.chain(area.options.data).pluck("browser").uniq().value();
                _.each(area.options.data, function(d, i) {
                  d.percent = Math.random() * 10 * (browsers.length - browsers.indexOf(d.browser) + 1);
                });
                area.update();
              })
              .on('click', '#area button.btn.append', function(e) {
                area.update({
                  "data": area.options.data.concat([
                    {"date": "11-Oct-13", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-14", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-15", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-16", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-17", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-18", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-19", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-20", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-21", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-22", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-23", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-24", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-25", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-26", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-27", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-28", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-29", "percent": Math.random() * 100, "browser": "Maxthon"},
                    {"date": "11-Oct-30", "percent": Math.random() * 100, "browser": "Maxthon"}
                  ])
                });
              });
            </script>
          </div>
          <!--/area-->

          <!-- scatter -->
          <div id="scatter" class="row-fluid">
            <h2>Scatter</h2>
            <p>Scatter plots display a set of (possibly overlapping) points in a sort of "swarm".
            The cookbook's scatter plot has the ability to assign a third dimension (point radius) to the data.</p>
            <div class="vis"></div>
            <button type="button" class="btn update">Update visualization with random data</button>
            <button type="button" class="btn append">Append random data to the visualization</button>
            <h4>Data Sample:</h4>
            <span>Full data set can be found in <a href="./data/flowers.json">flowers.json</a>.</span>
            <pre>[
  {"sepalLength": 5.1, "sepalWidth": 3.5, "petalLength": 1.4, "petalWidth": 0.2, "species": "setosa"},
  ...
  {"sepalLength": 7.0, "sepalWidth": 3.2, "petalLength": 4.7, "petalWidth": 1.4, "species": "versicolor"},
  ...
  {"sepalLength": 6.3, "sepalWidth": 3.3, "petalLength": 6.0, "petalWidth": 2.5, "species": "virginica"},
  ...
]</pre>
            <script type="text/javascript">
              var scatter = null;
              $(document).on('ready', function() {
                d3.json('./data/flowers.json', function(err, json) {
                  scatter = new Recipe['scatter']({
                    "data": json,
                    "selector": "#scatter .vis",
                    "xKey": "sepalWidth",
                    "yKey": "sepalLength",
                    "rKey": "petalLength",
                    "seriesKey": "species",
                    "xAxisLabel": "Sepal Width",
                    "yAxisLabel": "Sepal Lenght",
                    "rAxisLabel": "Point radius indicates Petal Length",
                    "xAxisFormatter": function(d) { return d3.round(d, 2); }
                  });
                });
              })
              .on('click', '#scatter button.btn.update', function(e) {
                _.each(scatter.options.data, function(d, i) {
                  d.sepalLength = Math.random() * 10;
                  d.sepalWidth = Math.random() + 3;
                  d.petalLength = Math.random() * 10.0;
                  d.petalWidth = Math.random() + 1;
                });
                scatter.update();
              })
              .on('click', '#scatter button.btn.append', function(e) {
                scatter.update({
                  "data": scatter.options.data.concat([
                    {"sepalLength": Math.random() * 10.0, "sepalWidth": Math.random() + 3.0, "petalLength": Math.random() * 10.0, "petalWidth": Math.random() + 1, "species": "randomcolor"},
                    {"sepalLength": Math.random() * 10.0, "sepalWidth": Math.random() + 3.0, "petalLength": Math.random() * 10.0, "petalWidth": Math.random() + 1, "species": "randomcolor"},
                    {"sepalLength": Math.random() * 10.0, "sepalWidth": Math.random() + 3.0, "petalLength": Math.random() * 10.0, "petalWidth": Math.random() + 1, "species": "randomcolor"},
                    {"sepalLength": Math.random() * 10.0, "sepalWidth": Math.random() + 3.0, "petalLength": Math.random() * 10.0, "petalWidth": Math.random() + 1, "species": "randomcolor"},
                    {"sepalLength": Math.random() * 10.0, "sepalWidth": Math.random() + 3.0, "petalLength": Math.random() * 10.0, "petalWidth": Math.random() + 1, "species": "randomcolor"},
                    {"sepalLength": Math.random() * 10.0, "sepalWidth": Math.random() + 3.0, "petalLength": Math.random() * 10.0, "petalWidth": Math.random() + 1, "species": "randomcolor"}
                  ])
                });
              });
            </script>
          </div>
          <!--/scatter-->

          <!-- bar -->
          <div id="bar" class="row-fluid">
            <h2>Bar</h2>
            <p>Bar graphs are good for comparing series of data against each other.
            The cookbook's bar graph also accepts data to draw a line on top of the bars.
            This is useful for showing things like averages.</p>
            <div class="vis"></div>
            <button type="button" class="btn update">Update visualization with random data</button>
            <button type="button" class="btn append">Append random data to the visualization</button>
            <button type="button" class="btn addline">Add a random line to the graph</button>
            <h4>Data Sample:</h4>
            <span>Full data set can be found in <a href="./data/letter_frequency.json">letter_frequency.json</a>.</span>
            <pre>[
  {"dialect": "us_english", "letter": "A", "frequency": 0.08167},
  {"dialect": "us_english", "letter": "B", "frequency": 0.01492},
  {"dialect": "us_english", "letter": "C", "frequency": 0.02780},
  ...
]</pre>
            <script type="text/javascript">
              var bar = null;
              $(document).on('ready', function() {
                d3.json('./data/letter_frequency.json', function(err, json) {
                  bar = new Recipe['bar']({
                    "data": json,
                    "selector": "#bar .vis",
                    "xKey": "letter",
                    "yKey": "frequency",
                    "yFormatter": function(d) { return +d; },
                    "xAxisLabel": "Letter",
                    "yAxisLabel": "Frequency",
                    "yAxisFormatter": function(d) { return d3.round(d, 2); },
                    "width": 1200,
                    "seriesKey": "dialect"
                  });
                });
              })
              .on('click', '#bar button.btn.update', function(e) {
                _.each(bar.options.data, function(d, i) {
                  d.frequency = Math.random();
                });
                bar.update();
              })
              .on('click', '#bar button.btn.append', function(e) {
                bar.update({
                  "data": bar.options.data.concat([
                    {"dialect": "uk_english", "letter": "A", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "B", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "C", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "D", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "E", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "F", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "G", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "H", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "I", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "J", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "K", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "L", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "M", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "N", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "O", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "P", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "Q", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "R", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "S", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "T", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "U", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "V", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "W", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "X", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "Y", "frequency": Math.random()},
                    {"dialect": "uk_english", "letter": "Z", "frequency": Math.random()}
                  ])
                });
              })
              .on('click', '#bar button.btn.addline', function(e) {
                bar.update({
                  "lData": [
                    {"letter": "A", "avg": Math.random()},
                    {"letter": "B", "avg": Math.random()},
                    {"letter": "C", "avg": Math.random()},
                    {"letter": "D", "avg": Math.random()},
                    {"letter": "E", "avg": Math.random()},
                    {"letter": "F", "avg": Math.random()},
                    {"letter": "G", "avg": Math.random()},
                    {"letter": "H", "avg": Math.random()},
                    {"letter": "I", "avg": Math.random()},
                    {"letter": "J", "avg": Math.random()},
                    {"letter": "K", "avg": Math.random()},
                    {"letter": "L", "avg": Math.random()},
                    {"letter": "M", "avg": Math.random()},
                    {"letter": "N", "avg": Math.random()},
                    {"letter": "O", "avg": Math.random()},
                    {"letter": "P", "avg": Math.random()},
                    {"letter": "Q", "avg": Math.random()},
                    {"letter": "R", "avg": Math.random()},
                    {"letter": "S", "avg": Math.random()},
                    {"letter": "T", "avg": Math.random()},
                    {"letter": "U", "avg": Math.random()},
                    {"letter": "V", "avg": Math.random()},
                    {"letter": "W", "avg": Math.random()},
                    {"letter": "X", "avg": Math.random()},
                    {"letter": "Y", "avg": Math.random()},
                    {"letter": "Z", "avg": Math.random()}
                  ],
                  "lKey": "avg",
                  "lAxisLabel": "Average (actually random)",
                  "lFormatter": function(d) { return +d; }
                });
              });
            </script>
          </div>
          <!--/bar-->

          <!-- heatmap -->
          <div id="heatmap" class="row-fluid">
            <h2>Heatmap</h2>
            <p>Heatmaps are useful for showing statistics (such as averages) over a repeated time period.</p>
            <div class="vis"></div>
            <button type="button" class="btn update">Update visualization with random data</button>
            <h4>Data Sample:</h4>
            <span>Full data set can be found in <a href="./data/avgcpubusy.json">avgcpubusy.json</a>.</span>
            <pre>[
  {"timestamp": "11/1/2012 00:00:00", "avgcpubusy": 86.41},
  {"timestamp": "11/1/2012 00:10:00", "avgcpubusy": 82.04},
  {"timestamp": "11/1/2012 00:20:00", "avgcpubusy": 96.33},
  ...
]</pre>
            <script type="text/javascript">
              var heatmap = null;
              $(document).on('ready', function() {
                d3.json('./data/avgcpubusy.json', function(err, json) {
                  heatmap = new Recipe['heatmap']({
                    "data": json,
                    "selector": "#heatmap .vis",
                    "width": 1200,
                    "valueKey": "avgcpubusy",
                    "valueFormatter": function(d) { return d3.round(d, 2); }
                  });
                });
              })
              .on('click', '#heatmap button.btn.update', function(e) {
                _.each(heatmap.options.data, function(d, i) {
                  d.avgcpubusy = Math.random() * 100;
                });
                heatmap.update();
              });
            </script>
          </div>
          <!--/heatmap-->

        </div>
        <!--/home-->
        <div id="pie" class="span9 hide">
          <div class="row-fluid">
            <h1>Pie Chart</h1>
            <div class="recipe"></div>
          </div>
        </div>
        <!--/pie-->
      </div>
      <!--/row-->
      <hr>
      <footer>
        <p>&copy; Clay Walker 2012. Licensed under the GPLv2 ONLY.</p>
      </footer>
    </div>
    <!--/home-->
  </body>
</html>
